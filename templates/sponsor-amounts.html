<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SponsorCat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="apple-touch-icon" sizes="180x180"
          href="{{ url_for('static', filename='favicon.ico', _external=True, _scheme=scheme) }}">
    <link rel="icon" type="image/png"
          href="{{ url_for('static', filename='favicon.ico', _external=True, _scheme=scheme) }}" sizes="32x32">
    <link rel="icon" type="image/png"
          href="{{ url_for('static', filename='favicon.ico', _external=True, _scheme=scheme) }}" sizes="16x16">
    <link rel="mask-icon" href="{{ url_for('static', filename='favicon.ico', _external=True, _scheme=scheme) }}"
          color="#5bbad5">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='mobile.css', _external=True, _scheme=scheme) }}">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script>
        function search() {
            let input, filter, table, tr, td, i, cat_total, txtValue, match, total;
            input = document.getElementById("search");
            filter = input.value.toUpperCase();
            table = document.getElementById("sponsorTable");
            cat_total = document.getElementById("cat-total");
            tr = table.children;
            total = 0;

            for (i = 0; i < tr.length; i++) { // for each row
                td = tr[i];
                match = false;
                    if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                            match = true;
                            total++;
                        }
                }
                if (match) {
                    tr[i].style.display = "";
                    cat_total.innerText = 'Total: ' + total;
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    </script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="#">SponsorCat</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="{{ url_for('index', _external=True, _scheme=scheme) }}">Sponsorships<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('sponsor_emails', _external=True, _scheme=scheme) }}">Emails</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('manual_sponsor', _external=True, _scheme=scheme) }}">Create Sponsorship</a>
            </li>
        </ul>
    </div>
</nav>
<div class="container">

    <div class="search-container">
        <div class="views"><a href="{{ url_for('index', _external=True, _scheme=scheme, view='desktop') }}">Desktop</a> | <a href="{{ url_for('index', _external=True, _scheme=scheme, view='mobile') }}">Mobile</a></div>
        <input type="text" id="search" class="search" onkeyup="search()" placeholder="Search">
        {% if cats %}
            <span id="cat-total">Total: {{ cats|length }} </span>
        {% endif %}    </div>
    <div id="sponsorTable" class="results-container">
        {% for cat in cats %}
            <div id="cat-card" class="card mb-0">
                <div class="row no-gutters">
                    <div class="row-img col-md-6">
                        <a href="{{ cat['cat_self_link'] }}">
                            <img class="card-img" src="{{ cat['cat_img'] }}" alt="{{ cat['cat_img'] }}">
                        </a>
                    </div>
                    <div class="col-md-6">
                        <div class="card-header">
                            <h5 class="card-title">{{ cat['cat_name'] }}</h5>
                            <h4 class="card-title">
                                ${{  }}</h4>
                                {% if cat['payment_type'] == 'paypal' %}
                                    <h6>
                                        <img class="payment-text" src="{{ url_for('static', filename='cc-paypal-brands.svg', _external=True, _scheme=scheme) }}">
                                        <small>{{ cat['paypal_order_id'] }}</small>
                                    </h6>
                                {% elif cat['payment_type'] == 'check' %}
                                    <h6>
                                        <img class="payment-text" src="{{ url_for('static', filename='money-check-alt-solid.svg', _external=True, _scheme=scheme) }}">
                                        <small>{{ cat['payment_type'].title() }}</small>
                                    </h6>
                                {% elif cat['payment_type'] == 'cash' %}
                                    <h6>
                                        <img class="payment-text" src="{{ url_for('static', filename='money-bill-alt-regular.svg', _external=True, _scheme=scheme) }}">
                                        <small>{{ cat['payment_type'].title() }}</small>
                                    </h6>
                                {% endif %}
                            <span title="{{ cat['sponsored_at'] }}">
                                <h6>{{ cat['sponsored_at'].strftime('%b %d, %Y %H:%M %p %Z') }}</h6>
                            </span>
                        </div>
                        <div class="card-body">

                            <div class="card-text">
                                <p>{{ cat['sponsor_amount'] }}</p>
                                <p class="card-text">{{ cat['name'] }} </p>
                                <p> {{ cat['email'] }}</p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}

    </div>
    {% if not cats %}
        <h2 class="center">No sponsorships found</h2>
    {% endif %}
</div>
</body>
</html>

